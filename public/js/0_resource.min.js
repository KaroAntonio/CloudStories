function increase_brightness(e,t){e=e.replace(/^\s*#|\s*$/g,""),3==e.length&&(e=e.replace(/(.)/g,"$1$1"))
var n=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2,2),16),i=parseInt(e.substr(4,2),16)
return"#"+(0|256+n+(256-n)*t/100).toString(16).substr(1)+(0|256+r+(256-r)*t/100).toString(16).substr(1)+(0|256+i+(256-i)*t/100).toString(16).substr(1)}function inverse(e){if(7!=e.length||0!=e.indexOf("#"))return null
var t=(255-parseInt(e.substring(1,3),16)).toString(16),n=(255-parseInt(e.substring(3,5),16)).toString(16),r=(255-parseInt(e.substring(5,7),16)).toString(16),i="#"+pad(t)+pad(n)+pad(r)
return i}function pad(e){return e.length<2?"0"+e:e}function listen_for_bumps(){if("undefined"!=typeof EventSource){var e=new EventSource("/updateStories.php")
e.onmessage=function(e){var t=JSON.parse(e.data)
storyLine[0].id==Number(t[0])&&(requestSubtree(Number(t[0])),null!=findLine(t[1])&&(buildStoryLine(t[1]),branches=findBranches(t[1]),drawAll()))}}}function initPrefs(e){return"tips_enabled"in e?"true"===e.tips_enabled?e.tips_enabled=!0:e.tips_enabled=!1:e.tips_enabled=!0,e}function postPreferences(e){$.ajaxSetup({headers:{"X-CSRF-Token":$("meta[name=_token]").attr("content")}})
$.post("update_prefs",e,onSuccess)}function onSuccess(e,t,n){console.log(e,t,n)}function stripHTML(e){var t=document.createElement("DIV")
return t.innerHTML=e,t.textContent||t.innerText||""}function disable_form(e){$(e).on("keyup keypress",function(e){var t=e.keyCode||e.which
return 13==t?(e.preventDefault(),!1):void 0})}function releaseKey(e){16==e&&(shiftDown=!1)}function triggerKey(e){return"line"==document.activeElement.name?void(13==e&&submitForm()):void(13==e?clickStory(null==selected?storyLine[0]:selected):16==e?(shiftDown=!0,storyLine.length>0&&clickStory(storyLine[1])):38==e&&shiftDown&&storyLine.length>0&&clickStory(storyLine[1]))}function buildStoryLine(e){if(null!=findLine(e)){for(storyLine=[findLine(e)],storyLine[0].top=isTop(e);1!=storyLine[storyLine.length-1].id;){var t=findLine(storyLine[storyLine.length-1].parentID)
if(null==t)break
t.top=isTop(t.id),storyLine.push(t)}branches=findBranches(storyLine[0].id)}}function isTop(e){for(var t=findLine(e),n=findBranches(t.parentID),r=0,i=0;i<n.length;i++)Number(n[i].visits)>r&&(r=n[i].visits)
return Number(t.visits)>=Number(r)}function findBranches(e){var t=[]
for(i=0;i<stories.length;i++)stories[i].parentID==e&&t.push(stories[i])
return t}function findLine(e){for(i=0;i<stories.length;i++)if(stories[i].id==e)return stories[i]
return null}function requestSubtree(id,depth,callback){var xmlhttp
return xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),void 0==id&&(id=1),xmlhttp.open("GET","/get_subtree/"+id+"/"+depth,!0),xmlhttp.send(),xmlhttp.onreadystatechange=function(){if(4==xmlhttp.readyState&&200==xmlhttp.status){var subtree=eval("("+xmlhttp.responseText+")")
appendSubtree(subtree),0==branches.length&&showStory(storyLine[0].id),void 0!==callback&&("click"==callback?clickStory(subtree[0]):callback())}},!0}function appendSubtree(e){storyIDs=[]
for(var t=0;t<stories.length;t++)storyIDs.push(Number(stories[t].id))
for(var t=0;t<e.length;t++)-1==storyIDs.indexOf(Number(e[t].id))&&stories.push(e[t])}function showStory(e){buildStoryLine(e),branches=findBranches(e),drawAll()}function clickStory(e){null!=e&&set_cookie("last_line_id",e.id,200),null!=e&&(null!=user&&(user.experience+=1),-1!=e.id?(showStory(e.id),requestSubtree(e.id,subtree_depth)):($("#line").val(e.line),submitForm()))}function submitForm(){var e=document.forms.line_form.line.value.trim()
e=stripHTML(e),$("#line").val(e)
var t=e.toLowerCase()
if(""==t)return void(0!=branches&&clickStory(branches[0]))
for(var n=findBranches(storyLine[0].id),r=0;r<n.length;r++)if(n[r].line.toLowerCase()==t)return clickStory(n[r]),void $("#line").val("")
$("#parentID").val(storyLine[0].id)
var i=null==user?0:user.id
$("#authorID").val(i)
var s=$.post("store",$("#line_form").serialize())
$("#line").val(""),s.done(function(e){num_lines++,appendSubtree([e]),clickStory(e)})}function initTips(){hideTip()
for(var e=Object.keys(tip_library),t=0;t<e.length;t++)$(e[t]).on("mouseover",function(e){return function(){showTip(e,"#tips_container")}}(e[t])),$(e[t]).on("mouseout",function(e){return function(){hideTip(e)}}(e[t]))}function disableTips(){tips_enabled=!1,$("#tips_container")[0].innerHTML="",preferences.tips_enabled=!1,console.log(preferences),postPreferences(preferences),set_cookie("tips_enabled",!1,200)}function hideTip(e){tips_enabled&&(showTip("default","#tips_container"),$(e).css("background","transparent"),$(e).css("border","none"))}function showTip(e,t,n,r,i){if(n="undefined"!=typeof n?n:!0,r="undefined"!=typeof r?r:!1,i="undefined"!=typeof i?i:tip_library,tips_enabled){var s=i[e]
console.log(t),$(t)[0].innerHTML=""
var o=""
n&r&&(o+="<div class='large_tip_title'>"+s.title+"</div>"),n&!r&&(o+="<div class='tip_title'>"+s.title+"</div>"),o+=r?"<div class='large_tip_content'>"+s.content+"</div>":"<div class='tip_content'>"+s.content+"</div>",$(t)[0].innerHTML=o}}function getTipKey(e,t){return Object.keys(e)[t]}function showBannerTip(e){showTip(getTipKey(intro_library,e),"#banner_tips",0!=e,!0,intro_library),$("#banner_nav")[0].innerHTML="",$("#banner_nav")[0].innerHTML+="<div id='next_button' class='nav_button' onclick='showBannerTip("+(e+1)+")'>NEXT></div>",$("#banner_nav")[0].innerHTML+="<div id='start_button' class='nav_button'>START</div>",void 0==getTipKey(intro_library,e+1)?$("#next_button")[0].style.display="none":$("#start_button")[0].style.display="none",$("#close_tips").on("click",hideBannerTip),$("#start_button").on("click",hideBannerTip),$("#disable_tips").remove()}function hideBannerTip(){$("#veil").css("display","none")}function set_cookie(e,t,n,r){var i=r?"; domain="+r:""
document.cookie=e+"="+encodeURIComponent(t)+"; max-age="+86400*n+"; path=/"+i}function is_cookie(e){var t=document.cookie
if(0!=t.length){var n=t.match(e+"=([^;]*)")
return null!=n}return!1}function get_cookie(e){var t=document.cookie
if(0!=t.length){var n=t.match(e+"=([^;]*)")
return decodeURIComponent(n[1])}return""}function drawAll(){drawStoryLine(),drawBranches(),drawStats()}function drawTree(){initTree()}function drawBackground(){renderStoryShells()}function drawStoryLine(){for($("#story_line").empty(),i=storyLine.length-1;i>=0;i--)drawLine(storyLine[i],colorScale,$("#story_line"))
$("#story_line_container")[0].scrollTop=$("#story_line_container")[0].scrollHeight}function drawBranches(){var e="#eee",t="inset 0 1px 1px rgba(0,0,0,.075), 0 0 5px "+forwardColor,n="inset 0 0 0px "+forwardColor
$("#line").css("border-color",e),$("#line")[0].style.boxShadow=n,$("#line")[0].style.MozBoxShadow=n,$("#line")[0].style.WebKitBoxShadow=n,$("#line").focus(function(){$(this).css("border-color",forwardColor),$(this)[0].style.boxShadow=t,$(this)[0].style.MozBoxShadow=t,$(this)[0].style.WebKitBoxShadow=t}),$("#line").blur(function(){$(this).css("border-color",e),$(this)[0].style.boxShadow=n,$(this)[0].style.MozBoxShadow=n,$(this)[0].style.WebKitBoxShadow=n})
var r={line:generatedLine,visits:0,id:-1}
if(""!=generatedLine&&branches.push(r),$("#branches").empty(),branches.length>0){branches.sort(function(e,t){return parseFloat(e.visits)-parseFloat(t.visits)}),branches.reverse()
var i=[]
i[0]=branches.splice(0,1),i[1]=branches.splice(0,1*branches.length/3),i[2]=branches.splice(0,branches.length)
for(var s=0;s<i.length;s++)if(i[s].length>0){var o=Math.floor(Math.random()*i[s].length)
branches.unshift(i[s].splice(o,1)[0])}branches.length>0?selected=branches[branches.length-1]:selected=null,branches.sort(function(e,t){return parseFloat(t.visits)-parseFloat(e.visits)})
var a=backColor
for(0==branches[0].visits&&(a=maxBranchColor),branchColorScale=d3.scale.linear().range([a,maxBranchColor]).domain([0,branches[0].visits]).clamp(!0),branches.length<=3&&$("#branches").height($(".line").height()*branches.length),s=0;s<branches.length;s++)drawLine(branches[s],branchColorScale,$("#branches"))
for(s=0;s<i.length;s++)for(o=0;o<i[s].length;o++)drawLine(i[s][o],branchColorScale,$("#branches"))}else selected=null,$("#branches").height(3)
0==branches.length&&storyLine.length>1&&document.getElementById("line").focus()}function colorLine(e,t,n,r){"branches"==r[0].id?n.style.color=t(e.visits):n.style.color=t(storyLine.indexOf(e))}function drawLine(e,t,n){var r=document.createElement("DIV")
"Anonymous"!=e.author_name&&void 0!=e.author_name&&(r.innerHTML="-"+e.author_name),r.id="info_"+e.id,r.className="info",debug&&(r.innerHTML+=" : "+e.visits)
var s=document.createElement("DIV")
colorLine(e,t,s,n),s.id="line_"+e.id,s.className="line",s.innerHTML=e.line
var o=function(e,t,n){return function(){t.style.color="#aaa",e.style["font-style"]="italic",e.style.color=colorScale(0)}}(s,r,e),a=function(e,r,i,o){return function(){r.style.color="transparent",e.style["font-style"]="normal",colorLine(o,t,s,n)}}(s,r,i,e)
s.onmouseenter=o,r.onmouseenter=o,s.onmouseout=a,r.onmouseout=a,s.onclick=function(e){return function(){clickStory(e)}}(e),n[0].appendChild(r),n[0].appendChild(s),r.style.marginLeft=-r.offsetWidth+"px"}function drawStats(){null!=user&&($("#user_stats")[0].innerHTML=""+user.experience+" // "+user.prestige+" // "+num_lines)}function displayAlphaWarning(){$("#alpha_warning").css("display","block")}function hideAlphaWarning(){$("#alpha_warning").css("display","none")}function setup(){var e=createCanvas(window.innerWidth,window.innerHeight)
e.parent("background")}function renderStoryShells(){background("#fff")
for(var e=50,t=storyLine.length-1;t>=0;t--)fill(stringColor(storyLine[t].line,forwardColor,.95)),noStroke(),ellipse(window.innerWidth/2,window.innerHeight/2,t*e,t*e)}function stringColor(e,t,n){for(var r=0,i=0;i<e.length;i++)r+=e.charCodeAt(i)*i
return 1118481>r&&(r+=13118481),shadeColor("#"+(r%16777215).toString(16),n)}function shadeColor(e,t){var n=parseInt(e.slice(1),16),r=0>t?0:255,i=0>t?-1*t:t,s=n>>16,o=n>>8&255,a=255&n
return"#"+(16777216+65536*(Math.round((r-s)*i)+s)+256*(Math.round((r-o)*i)+o)+(Math.round((r-a)*i)+a)).toString(16).slice(1)}function blendColors(e,t,n){var r=parseInt(e.slice(1),16),i=parseInt(t.slice(1),16),s=r>>16,o=r>>8&255,a=255&r,l=i>>16,c=i>>8&255,u=255&i
return"#"+(16777216+65536*(Math.round((l-s)*n)+s)+256*(Math.round((c-o)*n)+o)+(Math.round((u-a)*n)+a)).toString(16).slice(1)}function buildTree(e,t){var n=findLine(t),r=[n]
if("0"!=n.parentID){var i=findLine(n.parentID)
i.children=[n],n=i}for(;r.length>0;){var s=r[0]
r.splice(0,1),s.children=findBranches(s.id),r=r.concat(s.children)}return n}function initTree(){var e={top:20,right:120,bottom:20,left:120},t=width-e.right-e.left,n=800-e.top-e.bottom
tree=d3.layout.tree().size([height,width]),diagonal=d3.svg.diagonal().projection(function(e){return[e.y+10,e.x]}),$("#tree_container").empty(),svg=d3.select("#tree_container").append("svg").attr("width",t+e.right+e.left).attr("height",n+e.top+e.bottom).append("g").attr("transform","translate("+e.left+","+e.top+")"),root=buildTree(stories,get_cookie("last_line_id")),root.x0=n/2,root.y0=0,update(root)}function update(e){var t=tree.nodes(root).reverse(),n=tree.links(t)
t.forEach(function(e){e.y=180*e.depth})
var r=svg.selectAll("g.node").data(t,function(e){return e.id||(e.id=++node_i)}),i=r.enter().append("g").attr("class","node").attr("transform",function(t){return"translate("+e.y0+","+e.x0+")"}).on("click",click)
i.append("circle").attr("r",1e-6).style("fill",function(e){return e._children?"#FFB2B2":"#fff"}),i.append("text").attr("x",function(e){return e.children||e._children?-10:10}).attr("dy",".35em").attr("text-anchor",function(e){return e.children||e._children?"end":"start"}).text(function(e){return e.line}).attr("transform","rotate(-5)").style("fill-opacity",1e-6)
var s=r.transition().duration(duration).attr("transform",function(e){return"translate("+e.y+","+e.x+")"})
s.select("circle").attr("r",4.5).style("fill",function(e){return e._children?"#FFB2B2":"#fff"}),s.select("text").style("fill-opacity",1)
var o=r.exit().transition().duration(duration).attr("transform",function(t){return"translate("+e.y+","+e.x+")"}).remove()
o.select("circle").attr("r",1e-6),o.select("text").style("fill-opacity",1e-6)
var a=svg.selectAll("path.link").data(n,function(e){return e.target.id})
a.enter().insert("path","g").attr("class","link").attr("d",function(t){var n={x:e.x0,y:e.y0}
return diagonal({source:n,target:n})}),a.transition().duration(duration).attr("d",diagonal),a.exit().transition().duration(duration).attr("d",function(t){var n={x:e.x,y:e.y}
return diagonal({source:n,target:n})}).remove(),t.forEach(function(e){e.x0=e.x,e.y0=e.y})}function click(e){e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null),clickStory(e),update(e)}var module,countdown=function(e){function t(e,t){var n=e.getTime()
return e.setMonth(e.getMonth()+t),Math.round((e.getTime()-n)/864e5)}function n(e){var t=e.getTime(),n=new Date(t)
return n.setMonth(e.getMonth()+1),Math.round((n.getTime()-t)/864e5)}function r(e,t){if(t=t instanceof Date||null!==t&&isFinite(t)?new Date(+t):new Date,!e)return t
var n=+e.value||0
return n?(t.setTime(t.getTime()+n),t):((n=+e.milliseconds||0)&&t.setMilliseconds(t.getMilliseconds()+n),(n=+e.seconds||0)&&t.setSeconds(t.getSeconds()+n),(n=+e.minutes||0)&&t.setMinutes(t.getMinutes()+n),(n=+e.hours||0)&&t.setHours(t.getHours()+n),(n=+e.weeks||0)&&(n*=7),(n+=+e.days||0)&&t.setDate(t.getDate()+n),(n=+e.months||0)&&t.setMonth(t.getMonth()+n),(n=+e.millennia||0)&&(n*=10),(n+=+e.centuries||0)&&(n*=10),(n+=+e.decades||0)&&(n*=10),(n+=+e.years||0)&&t.setFullYear(t.getFullYear()+n),t)}function i(e,t){return y(e)+(1===e?c[t]:u[t])}function s(){}function o(e,t,r,i,s,o){if(0<=e[r]&&(t+=e[r],delete e[r]),t/=s,1>=t+1)return 0
if(0<=e[i]){switch(e[i]=+(e[i]+t).toFixed(o),i){case"seconds":if(60!==e.seconds||isNaN(e.minutes))break
e.minutes++,e.seconds=0
case"minutes":if(60!==e.minutes||isNaN(e.hours))break
e.hours++,e.minutes=0
case"hours":if(24!==e.hours||isNaN(e.days))break
e.days++,e.hours=0
case"days":if(7!==e.days||isNaN(e.weeks))break
e.weeks++,e.days=0
case"weeks":if(e.weeks!==n(e.refMonth)/7||isNaN(e.months))break
e.months++,e.weeks=0
case"months":if(12!==e.months||isNaN(e.years))break
e.years++,e.months=0
case"years":if(10!==e.years||isNaN(e.decades))break
e.decades++,e.years=0
case"decades":if(10!==e.decades||isNaN(e.centuries))break
e.centuries++,e.decades=0
case"centuries":if(10!==e.centuries||isNaN(e.millennia))break
e.millennia++,e.centuries=0}return 0}return t}function a(e,r,i,s,a,l){var c=new Date
e.start=r=r||c,e.end=i=i||c,e.units=s,e.value=i.getTime()-r.getTime(),0>e.value&&(c=i,i=r,r=c),e.refMonth=new Date(r.getFullYear(),r.getMonth(),15,12,0,0)
try{e.millennia=0,e.centuries=0,e.decades=0,e.years=i.getFullYear()-r.getFullYear(),e.months=i.getMonth()-r.getMonth(),e.weeks=0,e.days=i.getDate()-r.getDate(),e.hours=i.getHours()-r.getHours(),e.minutes=i.getMinutes()-r.getMinutes(),e.seconds=i.getSeconds()-r.getSeconds(),e.milliseconds=i.getMilliseconds()-r.getMilliseconds()
var u
for(0>e.milliseconds?(u=b(-e.milliseconds/1e3),e.seconds-=u,e.milliseconds+=1e3*u):1e3<=e.milliseconds&&(e.seconds+=g(e.milliseconds/1e3),e.milliseconds%=1e3),0>e.seconds?(u=b(-e.seconds/60),e.minutes-=u,e.seconds+=60*u):60<=e.seconds&&(e.minutes+=g(e.seconds/60),e.seconds%=60),0>e.minutes?(u=b(-e.minutes/60),e.hours-=u,e.minutes+=60*u):60<=e.minutes&&(e.hours+=g(e.minutes/60),e.minutes%=60),0>e.hours?(u=b(-e.hours/24),e.days-=u,e.hours+=24*u):24<=e.hours&&(e.days+=g(e.hours/24),e.hours%=24);0>e.days;)e.months--,e.days+=t(e.refMonth,1)
if(7<=e.days&&(e.weeks+=g(e.days/7),e.days%=7),0>e.months?(u=b(-e.months/12),e.years-=u,e.months+=12*u):12<=e.months&&(e.years+=g(e.months/12),e.months%=12),10<=e.years&&(e.decades+=g(e.years/10),e.years%=10,10<=e.decades&&(e.centuries+=g(e.decades/10),e.decades%=10,10<=e.centuries&&(e.millennia+=g(e.centuries/10),e.centuries%=10))),r=0,!(1024&s)||r>=a?(e.centuries+=10*e.millennia,delete e.millennia):e.millennia&&r++,!(512&s)||r>=a?(e.decades+=10*e.centuries,delete e.centuries):e.centuries&&r++,!(256&s)||r>=a?(e.years+=10*e.decades,delete e.decades):e.decades&&r++,!(128&s)||r>=a?(e.months+=12*e.years,delete e.years):e.years&&r++,!(64&s)||r>=a?(e.months&&(e.days+=t(e.refMonth,e.months)),delete e.months,7<=e.days&&(e.weeks+=g(e.days/7),e.days%=7)):e.months&&r++,!(32&s)||r>=a?(e.days+=7*e.weeks,delete e.weeks):e.weeks&&r++,!(16&s)||r>=a?(e.hours+=24*e.days,delete e.days):e.days&&r++,!(8&s)||r>=a?(e.minutes+=60*e.hours,delete e.hours):e.hours&&r++,!(4&s)||r>=a?(e.seconds+=60*e.minutes,delete e.minutes):e.minutes&&r++,!(2&s)||r>=a?(e.milliseconds+=1e3*e.seconds,delete e.seconds):e.seconds&&r++,!(1&s)||r>=a){var d=o(e,0,"milliseconds","seconds",1e3,l)
if(d&&(d=o(e,d,"seconds","minutes",60,l))&&(d=o(e,d,"minutes","hours",60,l))&&(d=o(e,d,"hours","days",24,l))&&(d=o(e,d,"days","weeks",7,l))&&(d=o(e,d,"weeks","months",n(e.refMonth)/7,l))){s=d
var h,f=e.refMonth,p=f.getTime(),y=new Date(p)
if(y.setFullYear(f.getFullYear()+1),h=Math.round((y.getTime()-p)/864e5),(d=o(e,s,"months","years",h/n(e.refMonth),l))&&(d=o(e,d,"years","decades",10,l))&&(d=o(e,d,"decades","centuries",10,l))&&(d=o(e,d,"centuries","millennia",10,l)))throw Error("Fractional unit overflow")}}}finally{delete e.refMonth}return e}function l(e,t,n,i,o){var l
n=+n||222,i=i>0?i:NaN,o=o>0?20>o?Math.round(o):20:0
var c=null
"function"==typeof e?(l=e,e=null):e instanceof Date||(null!==e&&isFinite(e)?e=new Date(+e):("object"==typeof c&&(c=e),e=null))
var u=null
if("function"==typeof t?(l=t,t=null):t instanceof Date||(null!==t&&isFinite(t)?t=new Date(+t):("object"==typeof t&&(u=t),t=null)),c&&(e=r(c,t)),u&&(t=r(u,e)),!e&&!t)return new s
if(!l)return a(new s,e,t,n,i,o)
var d,c=1&n?1e3/30:2&n?1e3:4&n?6e4:8&n?36e5:16&n?864e5:6048e5,u=function(){l(a(new s,e,t,n,i,o),d)}
return u(),d=setInterval(u,c)}var c,u,d,h,f,p,y,m,b=Math.ceil,g=Math.floor
s.prototype.toString=function(e){var t=m(this),n=t.length
return n?1===n?t[0]:(e=d+t.pop(),t.join(h)+e):e?""+e:f},s.prototype.toHTML=function(e,t){e=e||"span"
var n=m(this),r=n.length
if(!r)return(t=t||f)?"<"+e+">"+t+"</"+e+">":t
for(var i=0;r>i;i++)n[i]="<"+e+">"+n[i]+"</"+e+">"
return 1===r?n[0]:(r=d+n.pop(),n.join(h)+r)},s.prototype.addTo=function(e){return r(this,e)},m=function(e){var t=[],n=e.millennia
return n&&t.push(p(n,10)),(n=e.centuries)&&t.push(p(n,9)),(n=e.decades)&&t.push(p(n,8)),(n=e.years)&&t.push(p(n,7)),(n=e.months)&&t.push(p(n,6)),(n=e.weeks)&&t.push(p(n,5)),(n=e.days)&&t.push(p(n,4)),(n=e.hours)&&t.push(p(n,3)),(n=e.minutes)&&t.push(p(n,2)),(n=e.seconds)&&t.push(p(n,1)),(n=e.milliseconds)&&t.push(p(n,0)),t},l.MILLISECONDS=1,l.SECONDS=2,l.MINUTES=4,l.HOURS=8,l.DAYS=16,l.WEEKS=32,l.MONTHS=64,l.YEARS=128,l.DECADES=256,l.CENTURIES=512,l.MILLENNIA=1024,l.DEFAULTS=222,l.ALL=2047
var v=l.setFormat=function(e){if(e){if("singular"in e||"plural"in e){var t=e.singular||[]
t.split&&(t=t.split("|"))
var n=e.plural||[]
n.split&&(n=n.split("|"))
for(var r=0;10>=r;r++)c[r]=t[r]||c[r],u[r]=n[r]||u[r]}"string"==typeof e.last&&(d=e.last),"string"==typeof e.delim&&(h=e.delim),"string"==typeof e.empty&&(f=e.empty),"function"==typeof e.formatNumber&&(y=e.formatNumber),"function"==typeof e.formatter&&(p=e.formatter)}},w=l.resetFormat=function(){c=" millisecond; second; minute; hour; day; week; month; year; decade; century; millennium".split(";"),u=" milliseconds; seconds; minutes; hours; days; weeks; months; years; decades; centuries; millennia".split(";"),d=" and ",h=", ",f="",y=function(e){return e},p=i}
return l.setLabels=function(e,t,n,r,i,s,o){v({singular:e,plural:t,last:n,delim:r,empty:i,formatNumber:s,formatter:o})},l.resetLabels=w,w(),e&&e.exports?e.exports=l:"function"==typeof window.define&&"undefined"!=typeof window.define.amd&&window.define("countdown",[],function(){return l}),l}(module)
tip_library={"default":{title:"wrdcvlt",content:'[wurd-kuhlt] noun<br>i. a branching story tree<br>ii. an obsessive group that tends lovingly to said tree<br><div id="disable_tips" class="nav_button" onclick="disableTips()">Turn off Tips</div>'},"#story_line":{title:"The Story",content:"this is the past, the words you've already read<br>'SHIFT' moves you back up the story<br>Hold 'SHIFT'+'UP' to fast rewind"},"#branches":{title:"The Branches",content:"these are your options, the future, your posibilities<br>the top branch is the most popular<br>'ENTER' chooses the most popular branch<br>scroll for more options"},".info":{title:"Line Info",content:"who wrote this"},"#line_form":{title:"The Next Line...",content:"is yours to write"},"#user_stats":{title:"Literary Stats",content:"experience // readership // oeuvre <br>experience: is earned whenever you do anything <br>readership: the number of lines read x the number of people who read them <br>oeuvre: the number of lines you've written"},"#countdown":{title:"Spread the cvlt",content:"on kickstarter"}},intro_library={title:{title:"wrdcvlt",content:'[wurd-kuhlt] noun<br>i. a branching story tree<br>ii. an obsessive group that tends lovingly to said tree<br><div id="disable_tips" class="nav_button" onclick="disableTips()">Turn off Tips</div>'},read:{title:"Read",content:"the story by choosing a branch, <br>(the lines on the bottom half of the page) <br>'ENTER' pulls you down most popular story"},write:{title:"Write",content:"the story from any line,<br>growing a new branch"}}
